---
name: adsb

services:
  ultrafeeder:
    image: ghcr.io/sdr-enthusiasts/docker-adsb-ultrafeeder:latest@sha256:b14b7a51468ebfa8fcc59ca378f6e9f743ce09b22dbf8dddf5c2e255557ba7fe
    hostname: ultrafeeder
    ports:
      - "{{ adsb_compose_ip_binding_ultrafeeder_web }}:80"
      - "{{ adsb_compose_ip_binding_ultrafeeder_rtlport }}:30005"
    devices:
      - /dev/bus/usb:/dev/bus/usb
    volumes:
      - "{{ adsb_compose_config_path }}/autogain:/run/autogain"
    environment:
      TZ: "{{ adsb_compose_tz }}"
      READSB_DEVICE_TYPE: "rtlsdr"
      READSB_ALT: "{{ adsb_compose_altitude }}"
      READSB_LAT: "{{ adsb_compose_latitude }}"
      READSB_LON: "{{ adsb_compose_lontitude }}"
      GRAPHS1090_DISABLE: "true"
    restart: always
  fr24feed:
    image: ghcr.io/sdr-enthusiasts/docker-flightradar24:1.0.48-0@sha256:24a2649be3d56c8d8bda1858f5a8d321ec7831eb4e405d1e7607f7380a9ff13d
    environment:
      BEASTHOST: "{{ adsb_compose_beasthost }}"
      FR24KEY: "{{ adsb_compose_fr24key }}"
      MLAT: "yes"
    restart: always
  adsbhub:
    image: ghcr.io/sdr-enthusiasts/docker-adsbhub:1.06@sha256:021878b824fc5ab234e1b31ee59e175d6e8acaa1ed2e05abdb24094293f86daa
    environment:
      TZ: "{{ adsb_compose_tz }}"
      SBSHOST: "{{ adsb_compose_beasthost }}"
      LAT: "{{ adsb_compose_latitude }}"
      LON: "{{ adsb_compose_lontitude }}"
      CLIENTKEY: "{{ adsb_compose_adsbhub_clientkey }}"
    restart: always
  planefinder:
    image: ghcr.io/sdr-enthusiasts/docker-planefinder:latest@sha256:0c71a1edec68ab47fd4f7604a6d9c679755238b04353aadfe26a6dd1cbcbee4a
    environment:
      TZ: "{{ adsb_compose_tz }}"
      BEASTHOST: "{{ adsb_compose_beasthost }}"
      LAT: "{{ adsb_compose_latitude }}"
      LONG: "{{ adsb_compose_lontitude }}"
      SHARECODE: "{{ adsb_compose_planefinder_sharecode }}"
    restart: always
  opensky:
    image: ghcr.io/sdr-enthusiasts/docker-opensky-network:2.1.7-1@sha256:804e514232b273267927a5084e7c35c548daa996feffd3c0330e053a10ced375
    environment:
      TZ: "{{ adsb_compose_tz }}"
      BEASTHOST: "{{ adsb_compose_beasthost }}"
      ALT: "{{ adsb_compose_altitude }}"
      LAT: "{{ adsb_compose_latitude }}"
      LONG: "{{ adsb_compose_lontitude }}"
      OPENSKY_USERNAME: "{{ adsb_compose_opensky_username }}"
      OPENSKY_SERIAL: "-{{ adsb_compose_opensky_serial }}"
    restart: always
  piaware:
    image: ghcr.io/sdr-enthusiasts/docker-piaware:v9.0.1@sha256:aac670ff042711b6d7a0282082c2f31b00979d52199ba5f0fbaf33cff5d7144e
    environment:
      TZ: "{{ adsb_compose_tz }}"
      BEASTHOST: "{{ adsb_compose_beasthost }}"
      LAT: "{{ adsb_compose_latitude }}"
      LON: "{{ adsb_compose_lontitude }}"
      RECEIVER_TYPE: "relay"
      FEEDER_ID: "{{ adsb_compose_piaware_feeder_id }}"
    restart: always