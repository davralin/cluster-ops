---
name: adsb

services:
  ultrafeeder:
    image: ghcr.io/sdr-enthusiasts/docker-adsb-ultrafeeder:latest@sha256:34e9fcbf191b33297ef2afe91a7c5fb88e1b8ade6eafe589c091a70abfd0bccc
    hostname: ultrafeeder
    ports:
      - "{{ adsb_compose_ip_binding_ultrafeeder_web }}:80"
      - "{{ adsb_compose_ip_binding_ultrafeeder_rtlport }}:30005"
    devices:
      - /dev/bus/usb:/dev/bus/usb
    volumes:
      - "{{ adsb_compose_config_path }}/autogain:/run/autogain"
    environment:
      TZ: "{{ adsb_compose_tz }}"
      READSB_DEVICE_TYPE: "rtlsdr"
      READSB_ALT: "{{ adsb_compose_altitude }}"
      READSB_LAT: "{{ adsb_compose_latitude }}"
      READSB_LON: "{{ adsb_compose_lontitude }}"
      GRAPHS1090_DISABLE: "true"
    restart: always
  fr24feed:
    image: ghcr.io/sdr-enthusiasts/docker-flightradar24:1.0.48-0@sha256:e9d6c12a25997836319afd62650e7634994e9e9b0298c89ceb9b594354907ecb
    environment:
      BEASTHOST: "{{ adsb_compose_beasthost }}"
      FR24KEY: "{{ adsb_compose_fr24key }}"
      MLAT: "yes"
    restart: always
  adsbhub:
    image: ghcr.io/sdr-enthusiasts/docker-adsbhub:1.06@sha256:cd01b2bc654058d80cbbe06971bfe694c0b24a56c1e66358305d39e9c6aac0f8
    environment:
      TZ: "{{ adsb_compose_tz }}"
      SBSHOST: "{{ adsb_compose_beasthost }}"
      LAT: "{{ adsb_compose_latitude }}"
      LON: "{{ adsb_compose_lontitude }}"
      CLIENTKEY: "{{ adsb_compose_adsbhub_clientkey }}"
    restart: always
  planefinder:
    image: ghcr.io/sdr-enthusiasts/docker-planefinder:latest@sha256:cb2ee46172da695e80e7e6819c9d6663bb2e47d3b30e6cc683cdfcbaed065cd6
    environment:
      TZ: "{{ adsb_compose_tz }}"
      BEASTHOST: "{{ adsb_compose_beasthost }}"
      LAT: "{{ adsb_compose_latitude }}"
      LONG: "{{ adsb_compose_lontitude }}"
      SHARECODE: "{{ adsb_compose_planefinder_sharecode }}"
    restart: always
  opensky:
    image: ghcr.io/sdr-enthusiasts/docker-opensky-network:2.1.7-1@sha256:0dbddee3f27ef2bdf9a4b7ed1cbd47091357b381b2c42bb542075898de419f21
    environment:
      TZ: "{{ adsb_compose_tz }}"
      BEASTHOST: "{{ adsb_compose_beasthost }}"
      ALT: "{{ adsb_compose_altitude }}"
      LAT: "{{ adsb_compose_latitude }}"
      LONG: "{{ adsb_compose_lontitude }}"
      OPENSKY_USERNAME: "{{ adsb_compose_opensky_username }}"
      OPENSKY_SERIAL: "-{{ adsb_compose_opensky_serial }}"
    restart: always
  piaware:
    image: ghcr.io/sdr-enthusiasts/docker-piaware:v9.0.1@sha256:97206f4bc9723f5d9e534dd885c01271193a389b3427014b5ffc235c4283c411
    environment:
      TZ: "{{ adsb_compose_tz }}"
      BEASTHOST: "{{ adsb_compose_beasthost }}"
      LAT: "{{ adsb_compose_latitude }}"
      LON: "{{ adsb_compose_lontitude }}"
      RECEIVER_TYPE: "relay"
      FEEDER_ID: "{{ adsb_compose_piaware_feeder_id }}"
    restart: always