---
name: adsb

services:
  ultrafeeder:
    image: ghcr.io/sdr-enthusiasts/docker-adsb-ultrafeeder:latest@sha256:d1fbc9271ba8cb1c3f19a6be79aa2dcb452f1e6fb7a661b28412dfa7278be937
    hostname: ultrafeeder
    ports:
      - "{{ adsb_compose_ip_binding_ultrafeeder_web }}:80"
      - "{{ adsb_compose_ip_binding_ultrafeeder_rtlport }}:30005"
    devices:
      - /dev/bus/usb:/dev/bus/usb
    volumes:
      - "{{ adsb_compose_config_path }}/autogain:/run/autogain"
    environment:
      TZ: "{{ adsb_compose_tz }}"
      READSB_DEVICE_TYPE: "rtlsdr"
      READSB_ALT: "{{ adsb_compose_altitude }}"
      READSB_LAT: "{{ adsb_compose_latitude }}"
      READSB_LON: "{{ adsb_compose_lontitude }}"
      GRAPHS1090_DISABLE: "true"
    restart: always
  fr24feed:
    image: ghcr.io/sdr-enthusiasts/docker-flightradar24:1.0.48-0@sha256:509fb337833188b361b9d63ab9862e2efec1a14e8d7bc8b12f94a2b68f8790b0
    environment:
      BEASTHOST: "{{ adsb_compose_beasthost }}"
      FR24KEY: "{{ adsb_compose_fr24key }}"
      MLAT: "yes"
    restart: always
  adsbhub:
    image: ghcr.io/sdr-enthusiasts/docker-adsbhub:1.06@sha256:57c3c4a50dfa7753818ab2cc2311b1be7b4ebb8c13a996447f4bbe10ef8a51a7
    environment:
      TZ: "{{ adsb_compose_tz }}"
      SBSHOST: "{{ adsb_compose_beasthost }}"
      LAT: "{{ adsb_compose_latitude }}"
      LON: "{{ adsb_compose_lontitude }}"
      CLIENTKEY: "{{ adsb_compose_adsbhub_clientkey }}"
    restart: always
  planefinder:
    image: ghcr.io/sdr-enthusiasts/docker-planefinder:latest@sha256:1d5390931d541711d679b3094557b2dfa72524a22cb147091d95fe63235f8393
    environment:
      TZ: "{{ adsb_compose_tz }}"
      BEASTHOST: "{{ adsb_compose_beasthost }}"
      LAT: "{{ adsb_compose_latitude }}"
      LONG: "{{ adsb_compose_lontitude }}"
      SHARECODE: "{{ adsb_compose_planefinder_sharecode }}"
    restart: always
  opensky:
    image: ghcr.io/sdr-enthusiasts/docker-opensky-network:2.1.7-1@sha256:b7329d47963354bc22e2dddeb8bf0f2b11c6fe8cba6cf7af1da25186b9bcae44
    environment:
      TZ: "{{ adsb_compose_tz }}"
      BEASTHOST: "{{ adsb_compose_beasthost }}"
      ALT: "{{ adsb_compose_altitude }}"
      LAT: "{{ adsb_compose_latitude }}"
      LONG: "{{ adsb_compose_lontitude }}"
      OPENSKY_USERNAME: "{{ adsb_compose_opensky_username }}"
      OPENSKY_SERIAL: "-{{ adsb_compose_opensky_serial }}"
    restart: always
  piaware:
    image: ghcr.io/sdr-enthusiasts/docker-piaware:v9.0.1@sha256:d162ca31e7c14c7736ca978ae5c5be53beb40e21ee887f353dbdf9f02facc1e9
    environment:
      TZ: "{{ adsb_compose_tz }}"
      BEASTHOST: "{{ adsb_compose_beasthost }}"
      LAT: "{{ adsb_compose_latitude }}"
      LON: "{{ adsb_compose_lontitude }}"
      RECEIVER_TYPE: "relay"
      FEEDER_ID: "{{ adsb_compose_piaware_feeder_id }}"
    restart: always