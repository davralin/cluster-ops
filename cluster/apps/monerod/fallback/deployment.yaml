apiVersion: v1
items:
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "3"
      meta.helm.sh/release-name: monerod-monerod
      meta.helm.sh/release-namespace: monerod
      rollme: P0atn
    creationTimestamp: "2022-11-05T09:10:48Z"
    generation: 4
    labels:
      app.kubernetes.io/instance: monerod-monerod
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: monero-node
      app.kubernetes.io/version: latest
      helm-revision: "4"
      helm.sh/chart: monero-node-0.0.34
      helm.toolkit.fluxcd.io/name: monerod
      helm.toolkit.fluxcd.io/namespace: monerod
    name: monerod
    namespace: monerod
    resourceVersion: "153598904"
    uid: a9ac617f-334a-4767-957c-6314b5572873
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 3
    selector:
      matchLabels:
        app.kubernetes.io/instance: monerod-monerod
        app.kubernetes.io/name: monero-node
    strategy:
      type: Recreate
    template:
      metadata:
        creationTimestamp: null
        labels:
          app.kubernetes.io/instance: monerod-monerod
          app.kubernetes.io/name: monero-node
      spec:
        containers:
        - env:
          - name: PUID
            value: "568"
          - name: USER_ID
            value: "568"
          - name: UID
            value: "568"
          - name: UMASK
            value: "2"
          - name: UMASK_SET
            value: "2"
          - name: PGID
            value: "568"
          - name: GROUP_ID
            value: "568"
          - name: GID
            value: "568"
          - name: NVIDIA_VISIBLE_DEVICES
            value: void
          - name: TZ
            value: UTC
          - name: name
            value: monerod
          image: tccr.io/truecharts/monero-node:latest@sha256:8d67834f606749ad335aea610f420f9183b208d584c3b29572583d6013b91f38
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 5
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            tcpSocket:
              port: 18080
            timeoutSeconds: 5
          name: monerod
          ports:
          - containerPort: 18080
            name: main
            protocol: TCP
          - containerPort: 18081
            name: port2
            protocol: TCP
          readinessProbe:
            failureThreshold: 5
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            tcpSocket:
              port: 18080
            timeoutSeconds: 5
          resources:
            limits:
              cpu: "4"
              memory: 8Gi
            requests:
              cpu: 10m
              memory: 50Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities: {}
            privileged: false
            readOnlyRootFilesystem: false
            runAsNonRoot: false
          startupProbe:
            failureThreshold: 60
            initialDelaySeconds: 10
            periodSeconds: 5
            successThreshold: 1
            tcpSocket:
              port: 18080
            timeoutSeconds: 2
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /home/monero/.bitmonero
            name: blockchainstorage
          - mountPath: /usr/local
            name: containerdir1
          - mountPath: /src
            name: containerdir2
          - mountPath: /shared
            name: shared
          - mountPath: /dev/shm
            name: shm
          - mountPath: /tmp
            name: temp
          - mountPath: /var/logs
            name: varlogs
        dnsConfig:
          options:
          - name: ndots
            value: "1"
        dnsPolicy: ClusterFirst
        enableServiceLinks: false
        initContainers:
        - command:
          - /bin/sh
          - -c
          - |
            /bin/bash <<'EOF'
            echo "Automatically correcting permissions..."

            EOF
          image: tccr.io/truecharts/ubuntu:jammy-20221101@sha256:7ba6c3c7f95ab13e9c764f0f04987da6fa5192ccecbe6a267690a3c6b8090779
          imagePullPolicy: IfNotPresent
          name: prepare
          resources:
            limits:
              cpu: "4"
              memory: 8Gi
            requests:
              cpu: 10m
              memory: 50Mi
          securityContext:
            runAsUser: 0
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        nodeSelector:
          feature.node.kubernetes.io/custom-usb-backupdrive: "true"
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          fsGroup: 568
          fsGroupChangePolicy: OnRootMismatch
          runAsGroup: 0
          runAsUser: 0
          supplementalGroups:
          - 568
        serviceAccount: default
        serviceAccountName: default
        terminationGracePeriodSeconds: 10
        volumes:
        - name: blockchainstorage
          persistentVolumeClaim:
            claimName: monerod-local
        - name: containerdir1
          persistentVolumeClaim:
            claimName: monerod-containerdir1
        - name: containerdir2
          persistentVolumeClaim:
            claimName: monerod-containerdir2
        - emptyDir: {}
          name: shared
        - emptyDir:
            medium: Memory
          name: shm
        - emptyDir: {}
          name: temp
        - emptyDir: {}
          name: varlogs
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2022-11-05T09:10:48Z"
      lastUpdateTime: "2022-11-06T21:53:27Z"
      message: ReplicaSet "monerod-666cc965f7" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2022-12-10T15:27:21Z"
      lastUpdateTime: "2022-12-10T15:27:21Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 4
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
kind: List
metadata:
  resourceVersion: ""
